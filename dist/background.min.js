const currentIcons={},toggleIcon=(a)=>{const b=a.id;b in currentIcons||resetTabIcon(b),currentIcons[b]=!currentIcons[b],chrome.browserAction.setIcon({path:"img/icon_"+(currentIcons[b]?"active":"inactive")+".png",tabId:b}),chrome.tabs.executeScript({code:"wi.current.toggleStatus()"})},resetTabIcon=(a)=>{currentIcons[a]=!1};chrome.browserAction.onClicked.addListener(toggleIcon),chrome.tabs.onCreated.addListener((a)=>{resetTabIcon(a.id)}),chrome.tabs.onUpdated.addListener((a)=>{resetTabIcon(a)}),chrome.tabs.onRemoved.addListener((a)=>{currentIcons[a]=null}),chrome.extension.onRequest.addListener((a,b)=>{if(a&&"undefined"!=typeof a.action&&b&&"undefined"!=typeof b.tab)switch(a.action){case"toggleIcon":toggleIcon(b.tab);}});